<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>homepage</title>
    <link href="/static/base.css" rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>
<body>

    <h1 align="center">This is a Spider of Maoyan Movies Top 100</h1>
    <form action="{% url 'spider' %}" class="form-horizontal" method="POST">
        {% csrf_token %}
        {{ form }}
        <button type="submit" class="btn btn-primary form-control">开始爬取</button>
    </form>
    {% if movies %}
    <h3 align="center">爬取结果</h3>
    <table>
        <tr>
            <th>Movie Name</th>
            <th>Movie Stars</th>
            <th>Release Time</th>
            <th>Score</th>
        </tr>
        <tbody>
        {% for movie in movies %}
            <tr>
                <td>{{ movie.name }}</td>
                <td>{{ movie.stars }}</td>
                <td>{{ movie.release_time }}</td>
                <td>{{ movie.score }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    {% endif %}

    {% if is_paginated %}
         <ul class="pagination">
        {% if movies.has_previous %}
          <li class="page-item"><a class="page-link" href="?page={{ movies.previous_page_number }}">Previous</a></li>
        {% else %}
          <li class="page-item disabled"><span class="page-link">Previous</span></li>
        {% endif %}

        {% for i in paginator.page_range %}
            {% if movies.number == i %}
          <li class="page-item active"><span class="page-link"> {{ i }} <span class="sr-only">(current)</span></span></li>
           {% else %}
            <li class="page-item"><a class="page-link" href="?page={{ i }}">{{ i }}</a></li>
           {% endif %}
        {% endfor %}

             {% if movies.has_next %}
          <li class="page-item"><a class="page-link" href="?page={{ movies.next_page_number }}">Next</a></li>
        {% else %}
          <li class="page-item disabled"><span class="page-link">Next</span></li>
        {% endif %}
        </ul>

    {% endif %}

</body>
</html>